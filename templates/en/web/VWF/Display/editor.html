<!DOCTYPE html>

<html>
	<!-- see http://samwillis.co.uk/pagedown-bootstrap/demo/browser/demo.html -->

	<head>
		<title>Add a Blog Entry</title>

		<link rel="stylesheet" type="text/css" href="/css/demo.css" />

		<script type="text/javascript" src="/js/Markdown.Converter.js"></script>
		<script type="text/javascript" src="/js/Markdown.Sanitizer.js"></script>
		<script type="text/javascript" src="/js/Markdown.Editor.js"></script>
	</head>

<body>
    <div class="container">

        <h1>Add a Blog Entry</h1>
        <p>Type in your entry and then click on publish.</p>

        <hr />

        <div class="wmd-panel">
            <div id="wmd-button-bar-second"></div>
<form action="/cgi-bin/page.fcgi?page=editor" method="post">
<input type="hidden" name="action" value="publish">
<p>Title: <input type="text" name="title"></p>
<textarea class="wmd-input" name="contents" id="wmd-input-second">
Put your title here
-------------------

Put your text here. You can use HTML if you want.
</textarea>
<button type="submit">Publish</button>
        </div>
        <div id="wmd-preview-second" class="wmd-panel wmd-preview"></div>

    </div>

    <script type="text/javascript">
        (function () {
            // var converter1 = Markdown.getSanitizingConverter();
            // var editor1 = new Markdown.Editor(converter1);
            // editor1.run();

            var converter2 = new Markdown.Converter();

            // converter2.hooks.chain("preConversion", function (text) {
                // return text.replace(/\b(a\w*)/gi, "*$1*");
            // });

            converter2.hooks.chain("plainLinkText", function (url) {
                return "This is a link to " + url.replace(/^https?:\/\//, "");
            });

            var help = function () { alert("Do you need help?"); }

            var editor2 = new Markdown.Editor(converter2, "-second", { handler: help });

            editor2.run();
        })();
    </script>
</body>
</html>
